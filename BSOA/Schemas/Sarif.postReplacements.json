{
  "replacements": [
    {
      "description": "SchemaUri writes as '$schema' in file",
      "replace": "\"schemaUri\"",
      "with": "\"$schema\"",
      "arePlainText": true
    },
    {
      "description": "PropertyBag shouldn't inherit from itself",
      "replace": "PropertyBag : PropertyBagHolder, ",
      "with": "PropertyBag : ",
      "files": "PropertyBag\\.cs",
      "arePlainText": true
    },    
    {
      "description": "Properties property must be virtual",
      "replace": "public IDictionary<String, SerializedPropertyInfo> Properties",
      "with": "public virtual IDictionary<String, SerializedPropertyInfo> Properties",
      "arePlainText": true
    },
    {
      "description": "Base class defines Properties, so entities must declare as 'internal override'",
      "replace": "public virtual IDictionary<String, SerializedPropertyInfo> Properties",
      "with": "internal override IDictionary<String, SerializedPropertyInfo> Properties",
      "arePlainText": true
    },
    {
      "description": "Use custom reader for SarifVersion enum",
      "replace": "JsonToEnum<SarifVersion>.Read(reader, root)",
      "with": "Readers.JsonToSarifVersion.Read(reader, root)",
      "arePlainText": true
    },
    {
      "description": "Auto-Set Result.Run on Results",
      "replace": "TypedList<Result>.Get(_table.Database.Result, _table.Results, _index)",
      "with": "ResultList.Get(this, _table.Database.Result, _table.Results, _index)",
      "files": "Run\\.cs",
      "arePlainText": true
    },
    {
      "description": "Result.Kind and Level have inter-related logic",
      "replace": "(public ResultKind Kind.*?set \\{ [^}]+) }",
      "with": "$1 if (value != ResultKind.Fail) { Level = FailureLevel.None; } }",
      "files": "Result\\.cs"
    },
    {
      "description": "Result.Kind and Level have inter-related logic",
      "replace": "(public FailureLevel Level.*?set \\{ [^}]+) }",
      "with": "$1 if (value != FailureLevel.None) { Kind = ResultKind.Fail; } }",
      "files": "Result\\.cs"
    },
    {
      "description": "FlagsEnum representation is non-standard",
      "replace": "JsonToEnum<(ArtifactRoles|ToolComponentContents)>.(Read|Write)",
      "with": "Readers.FlagsEnumConverter.Instance.$2<$1>"
    },
    {
      "description": "Run.Results is should write if empty, but not null",
      "replace": "JsonToResult.Write)",
      "with": "JsonToResult.Write, required: (item.Results != null))",
      "files": "JsonToRun\\.cs",
      "arePlainText": true
    },
    {
      "description": "Don't serialize default ReportingConfiguration",
      "replace": "item != null",
      "with": "(item != null && item != ReportingConfiguration.Empty)",
      "files": "JsonToReportingConfiguration\\.cs",
      "arePlainText": true
    },
    {
      "description": "Don't serialize null Language",
      "replace": "JsonToString.Write(writer, \"language\", item.Language, \"en-US\");",
      "with": "if (item.Language != null) { JsonToString.Write(writer, \"language\", item.Language, \"en-US\"); }",
      "arePlainText": true
    },
    {
      "description": "Run.Tool is required",
      "replace": "JsonToTool.Write(writer, \"tool\", item.Tool)",
      "with": "JsonToTool.Write(writer, \"tool\", item.Tool, required: true)",
      "files": "JsonToRun\\.cs",
      "arePlainText": true
    },
    {
      "description": "Result.Message and Notification.Message are required",
      "replace": "JsonToMessage.Write(writer, \"message\", item.Message)",
      "with": "JsonToMessage.Write(writer, \"message\", item.Message, required: true)",
      "files": "JsonTo(Result|Notification)\\.cs",
      "arePlainText": true
    },
    {
      "description": "Result.Locations should be written when empty",
      "replace": "JsonToIList<Location>.Write(writer, \"locations\", item.Locations, JsonToLocation.Write)",
      "with": "JsonToIList<Location>.Write(writer, \"locations\", item.Locations, JsonToLocation.Write, required: (item.Locations != null))",
      "files": "JsonToResult\\.cs",
      "arePlainText": true
    },
    {
      "description": "ToolComponent.Name is required",
      "replace": "Write(writer, \"name\", item.Name, default)",
      "with": "Write(writer, \"name\", item.Name, default, required: true)",
      "files": "JsonToToolComponent\\.cs",
      "arePlainText": true
    },
    {
      "description": "ReportingDescriptor.Id is required",
      "replace": "Write(writer, \"id\", item.Id, default)",
      "with": "Write(writer, \"id\", item.Id, default, required: true)",
      "files": "JsonToReportingDescriptor\\.cs",
      "arePlainText": true
    },
    {
      "description": "Invocation.ExecutionSuccessful, GraphTraversal.EdgeTraversals are required",
      "replace": "(\\.Write\\(writer, \"(executionSuccessful|edgeTraversals)\", ([^\\)]+))\\);",
      "with": "$1, required: true);"
    },
    {
      "description": "Graph.Nodes, Edges are required",
      "replace": "(\\.Write\\(writer, \"(nodes|edges)\", ([^\\)]+))\\);",
      "with": "$1, required: true);",
      "files": "JsonToGraph\\.cs"
    }
  ]
}